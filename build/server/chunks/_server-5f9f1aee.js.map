{"version":3,"file":"_server-5f9f1aee.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/embed-_tag_/js/_server.js"],"sourcesContent":["async function GET({ url, params }) {\n  const { tag } = params;\n  const uriOriginal = url.href;\n  let theme = \"light\";\n  if (uriOriginal.search(\"theme=dark\") !== -1) {\n    theme = \"dark\";\n  }\n  const uriEmbedded = uriOriginal.split(\"/js\")[0];\n  const currentSlug = tag;\n  const js = `\n\t(function () {\n    var createEmbedFrame = function () {\n        var uid = \"KENER_\" + ~~(new Date().getTime() / 86400000);\n        var uriOriginal = \"${uriOriginal}\";\n        var uriOriginalNoProtocol = uriOriginal.split(\"//\").pop();\n        var uriEmbedded = \"${uriEmbedded}?theme=${theme}\";\n        var currentSlug = \"${currentSlug}\";\n        var target = document.querySelector(\"script[src*='\" + uriOriginalNoProtocol + \"']\");\n        var iframe = document.createElement(\"iframe\");\n\n        iframe.src = uriEmbedded;\n        iframe.id = uid;\n        iframe.width = \"0%\";\n        iframe.height = \"0\";\n        iframe.frameBorder = \"0\";\n        iframe.allowtransparency = true;\n        iframe.sandbox = \"allow-modals allow-forms allow-same-origin allow-scripts allow-popups allow-top-navigation-by-user-activation allow-downloads\";\n        iframe.allow = \"midi; geolocation; microphone; camera; display-capture; encrypted-media;\";\n\n        target.parentNode.insertBefore(iframe, target.nextSibling);\n\n        var setHeight = function (data) {\n\t\n            if (data.slug === currentSlug) {\n                var height = data.height;\n                iframe.height = height;\n            }\n        };\n        var setWidth = function (data) {\n\t\t\n            if (data.slug === currentSlug) {\n                var width = data.width;\n                iframe.width = width;\n            }\n        };\n\n        var listeners = function (event) {\n            var eventName = event.data[0];\n            var data = event.data[1];\n\t\t\tif(event.data.height !== undefined) {\n\t\t\t\tsetHeight(event.data);\n\t\t\t}\n\t\t\tif(event.data.width !== undefined) {\n\t\t\t\tsetWidth(event.data);\n\t\t\t}\n            \n        };\n\n        window.addEventListener(\"message\", listeners, false);\n    };\n\n    setTimeout(createEmbedFrame, 5);\n}).call(this);\n\n\t`;\n  return new Response(js, {\n    headers: {\n      \"Content-Type\": \"application/javascript\"\n    }\n  });\n}\nexport {\n  GET\n};\n"],"names":[],"mappings":"AAAA,eAAe,GAAG,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE;AACpC,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,CAAC;AACzB,EAAE,MAAM,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC;AAC/B,EAAE,IAAI,KAAK,GAAG,OAAO,CAAC;AACtB,EAAE,IAAI,WAAW,CAAC,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE;AAC/C,IAAI,KAAK,GAAG,MAAM,CAAC;AACnB,GAAG;AACH,EAAE,MAAM,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;AAClD,EAAE,MAAM,WAAW,GAAG,GAAG,CAAC;AAC1B,EAAE,MAAM,EAAE,GAAG,CAAC;AACd;AACA;AACA;AACA,2BAA2B,EAAE,WAAW,CAAC;AACzC;AACA,2BAA2B,EAAE,WAAW,CAAC,OAAO,EAAE,KAAK,CAAC;AACxD,2BAA2B,EAAE,WAAW,CAAC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAAC,CAAC;AACH,EAAE,OAAO,IAAI,QAAQ,CAAC,EAAE,EAAE;AAC1B,IAAI,OAAO,EAAE;AACb,MAAM,cAAc,EAAE,wBAAwB;AAC9C,KAAK;AACL,GAAG,CAAC,CAAC;AACL;;;;"}